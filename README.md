# contrail-db-explorer
This script is a tool to explore/compare Contrail configuration in Cassandra and Zookeeper.

Currently, it takes Contrail DB snapshot in json format as input. Following [Backing Up Contrail Databases Using JSON Format](https://www.juniper.net/documentation/en_US/contrail4.0/topics/concept/backup-using-json-40.html) to get Contrail DB snapshot.

## Usage
```
[cheny-mbp:~/]$ python db_explorer.py -h
usage: db_explorer [-h] [--version] [--json_file FILE] [-v] {show,comp} ...

Script to explore/compare Contrail configuration in json

positional arguments:
  {show,comp}
    show            db show
    comp            db compare

optional arguments:
  -h, --help        show this help message and exit
  --version         show program's version number and exit
  --json_file FILE  Json file generated by db_json_exmin.py, default='db-
                    dump.json'
  -v, --verbose     Run in verbose/INFO mode, default False
 

[cheny-mbp:~/W]$ python db_explorer.py show -h
usage: db_explorer show [-h] {svc_mon,dm,zk,config_db,to_bgp,useragent} ...

positional arguments:
  {svc_mon,dm,zk,config_db,to_bgp,useragent}
    svc_mon             Show svc_monitor_keyspace
    dm                  Show dm_keyspace
    zk                  Show zookeeper
    config_db           Show config_db_uuid
    to_bgp              Show to_bgp_keyspace
    useragent           Show useragent

optional arguments:
  -h, --help            show this help message and exit
  
  
[cheny-mbp:~/]$ python db_explorer.py comp -h
usage: db_explorer comp [-h] [-d]
                        new_json_file
                        {config_db_uuid,useragent,to_bgp_keyspace,svc_monitor_keyspace,dm_keyspace,zookeeper,object,all}
                        [objects [objects ...]]

positional arguments:
  new_json_file         json file to be compared
  {config_db_uuid,useragent,to_bgp_keyspace,svc_monitor_keyspace,dm_keyspace,zookeeper,object,all}
                        Scope to be compared
  objects               object uuid to be compared.

optional arguments:
  -h, --help            show this help message and exit
  -d, --detail          Display details

```
